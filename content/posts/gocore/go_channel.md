---
title: "通道的基本操作"
date: 2020-12-13T15:17:24+08:00
toc: true
isCJKLanguage: true
tags: 
  - Go
  - channel
---

作为 `Go` 语言最具特色的数据类型，通道（channel）完全可以与 `goroutine` （协程）并驾齐驱，共同代表 `Go` 语言独有的并发编程模式和编程哲学。

> Don’t communicate by sharing memory; share memory by communicating. （不要通过共享内存来通信，而应该通过通信来共享内存。）

这是作为 `Go` 语言的主要创造者之一的 `Rob Pike` 的至理名言，这也充分体现了 `Go` 语言最重要的编程理念。而通道类型恰恰是后半句话的完美实现，我们可以利用通道在多个 `goroutine` 之间传递数据。

## 通道的基础知识

通道类型的值本身就是并发安全的，这也是 `Go` 语言自带的、唯一一个可以满足并发安全性的类型。

声明一个通道时，需要用到内建函数 `make`。就像用 `make`  初始化切片那样，传给这个函数的第一个参数应该是代表了通道的具体类型的类型字面量。第二个参数确定该通道的元素类型，这决定了我们可以通过这个通道传递什么类型的数据。

比如，类型字面量 `chan int`，其中 `chan` 是表示通道的关键字，`int` 则说明该通道的元素类型。

```go
ch := make(chan int)
```

声明通道时还可以传一个 `int` 类型的参数表示通道的容量。该参数是可选的，表示通道可以缓存多少个元素值，因此该参数不能小于 0。

当容量为 0 时，

